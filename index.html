<!DOCTYPE html>
<head>
    <title>
        MonkeyType Clone
    </title>
    <link rel="stylesheet" href=design.css>
</head>
<body>
  <div class="welcome">
  <p><u>WELCOME TO TYPING TEST</u></p></div>
  <p class="instr">Click the start button to start the test</p>
  <button class="show-js" onclick = "display();">Start</button>
  <button class ="clear-js" onclick="clearScreen();">Clear Screen</button>
  <div class="display"></div>
  <input class="input-js" placeholder="Type Here" >
<script>
    let words = ["success", "comes", "from", "consistent", "effort", "and", "dedication", "every", "small", "step", "forward", "brings", "you", "closer", "to", "your", "goals", "keep", "practicing", "and", "never", "give", "up", "on", "your", "dreams","when", "you", "practice", "typing", "every", "day", "your", "fingers", "learn", "where", "each", "key", "is", "located", "without", "looking", "down", "at", "the",
     "keyboard", "this", "muscle", "memory", "helps", "you", "type", "faster", "and", "with", "fewer", "mistakes", "over", "time"];

    let text = words.join(' ');
    let allspans = [];
    let spanIndex =0;
   

    function display(){
        allspans = []
        spanIndex = 0
        wordIndex = 0
        characterIndex = 0
        counter = 0
       totalKeystrokes = 0    
       startTime = null  
  for(i=0;i<words.length;i++){
    for(j=0;j<words[i].length;j++){
        let span = document.createElement('span');
        span.classList.add('untyped');
        span.textContent =words[i][j];
        allspans.push(span);
        document.querySelector('.display').appendChild(span);
        
}    if (i < words.length - 1) {
        let spaceSpan = document.createElement('span');
        spaceSpan.classList.add('untyped');
        spaceSpan.textContent = ' ';
        allspans.push(spaceSpan);
        document.querySelector('.display').appendChild(spaceSpan);
}

  
    }
    
      allspans[0].classList.add('cursor');

    }
    function clearScreen(){
        allspans = []
        spanIndex = 0
        wordIndex = 0
        characterIndex = 0
        counter = 0
        totalKeystrokes = 0    
       startTime = null  
        document.querySelector('.display').innerHTML = '';
        
    }
    let wordIndex = 0;
    let characterIndex =0;
    let counter =0;
    let totalKeystrokes =0;
    let startTime = null;

    document.addEventListener('keydown', function(event){

       if(startTime === null) {
        startTime = Date.now();  
    }
        if(event.key!=' '&& event.key!='Backspace'){
        totalKeystrokes +=1;}

if(event.key === 'Backspace') {
    if(spanIndex > 0) {
        allspans[spanIndex].classList.remove('cursor');
        spanIndex -= 1;
        
        if(allspans[spanIndex].textContent === ' ') {
            wordIndex -= 1;
            characterIndex = words[wordIndex].length;
        } else {
            characterIndex -= 1;
        }
        
        if(allspans[spanIndex].classList.contains('correct')) {
            allspans[spanIndex].classList.replace('correct','untyped');
        } else if(allspans[spanIndex].classList.contains('wrong')) {
            allspans[spanIndex].classList.replace('wrong','untyped');
        }
        
        allspans[spanIndex].classList.add('cursor');
    }
    return;
}


if(event.key === ' ') {
if(characterIndex > 0 && wordIndex < words.length - 1) {
    allspans[spanIndex].classList.remove('cursor');
    
    if(characterIndex === words[wordIndex].length) {
        allspans[spanIndex].classList.replace('untyped','correct');
} else {
    allspans[spanIndex].classList.replace('untyped','wrong');
}
        
        wordIndex += 1;
        characterIndex = 0;
        spanIndex += 1;
        allspans[spanIndex].classList.add('cursor');
    }
    return;
}

if(characterIndex < words[wordIndex].length && spanIndex < allspans.length) {
if(words[wordIndex][characterIndex] === event.key) {
    allspans[spanIndex].classList.replace('untyped','correct');
    counter += 1;
    } else {
        if(event.key.length === 1) {
            allspans[spanIndex].classList.replace('untyped','wrong');
   } else {
            return;
        }
    }
    
    allspans[spanIndex].classList.remove('cursor');
    characterIndex += 1;
    spanIndex += 1;
    
    if(spanIndex < allspans.length) {
        allspans[spanIndex].classList.add('cursor');
      }

      console.log(totalKeystrokes);
}

if(spanIndex >= allspans.length && startTime !== null) {
    let accuracy = (counter / totalKeystrokes) * 100;
    let timetaken = (Date.now() - startTime) / 1000;
    let wpm = (totalKeystrokes / 5) / (timetaken / 60);
    
    console.log('Test Complete!');
    console.log('Time:', timetaken, 'seconds');
    console.log('WPM:', wpm);
    console.log('Accuracy:', accuracy, '%');
}

}) 




   
</script> 
</body>
</html>
